# ========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Media Center Arti Marziali
# ========================================
#
# IMPORTANT:
# 1. Copy this file to .env.production
# 2. Replace ALL placeholder values with real credentials
# 3. NEVER commit .env.production to git
# 4. Keep .env.production.template in git as reference
#
# Generate SECRET_KEY: openssl rand -hex 32
# ========================================

# ========================================
# APPLICATION SETTINGS
# ========================================
ENV=production
DEBUG=false
APP_NAME=Media Center Arti Marziali
APP_VERSION=1.0.0

# Domain configuration
DOMAIN=yourdomain.com
BACKEND_URL=https://api.yourdomain.com
FRONTEND_URL=https://yourdomain.com
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,api.yourdomain.com

# CORS (comma-separated origins)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ========================================
# SECURITY
# ========================================
# Generate with: openssl rand -hex 32
SECRET_KEY=REPLACE_WITH_STRONG_RANDOM_KEY_64_CHARS_MINIMUM

# JWT Configuration
ACCESS_TOKEN_EXPIRE_MINUTES=90
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing (bcrypt)
BCRYPT_ROUNDS=12

# ========================================
# DATABASE - PostgreSQL
# ========================================
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://martial_user:STRONG_PASSWORD@db-host.example.com:5432/martial_arts_prod

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ========================================
# REDIS (Caching & Sessions)
# ========================================
REDIS_URL=redis://redis-host.example.com:6379/0
REDIS_PASSWORD=REDIS_PASSWORD_HERE

# Cache TTL (seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_USER_PROFILE=1800
CACHE_TTL_VIDEO_METADATA=3600
CACHE_TTL_SEARCH_RESULTS=900

# ========================================
# STRIPE PAYMENT PROCESSING
# ========================================
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here

# Webhook (get from Stripe Dashboard)
STRIPE_WEBHOOK_SECRET=whsec_XXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_WEBHOOK_ENDPOINT=https://api.yourdomain.com/api/v1/webhooks/stripe

# ========================================
# AWS S3 / CLOUDFLARE R2 (Video Storage)
# ========================================
# Option 1: AWS S3
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
AWS_REGION=eu-west-1
S3_BUCKET_NAME=martial-arts-videos-prod
S3_PUBLIC_URL=https://martial-arts-videos-prod.s3.eu-west-1.amazonaws.com

# Option 2: CloudFlare R2 (S3-compatible)
# CLOUDFLARE_ACCOUNT_ID=your_account_id
# CLOUDFLARE_API_TOKEN=your_api_token
# R2_BUCKET_NAME=martial-arts-videos
# R2_PUBLIC_URL=https://your-bucket.r2.dev

# Video upload limits
MAX_UPLOAD_SIZE_MB=5000
ALLOWED_VIDEO_FORMATS=mp4,mov,avi,mkv

# ========================================
# EMAIL SERVICE (SendGrid / SMTP)
# ========================================
# Option 1: SendGrid
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=SG.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Media Center Arti Marziali

# Option 2: SMTP
# EMAIL_PROVIDER=smtp
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_TLS=true

# Email templates
EMAIL_VERIFICATION_URL=https://yourdomain.com/verify-email
PASSWORD_RESET_URL=https://yourdomain.com/reset-password

# ========================================
# AI SERVICES
# ========================================
# OpenAI (GPT-4 for conversational agent)
OPENAI_API_KEY=sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Anthropic Claude (alternative LLM)
ANTHROPIC_API_KEY=sk-ant-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Google Cloud (for MediaPipe, Speech, Translation)
GOOGLE_APPLICATION_CREDENTIALS=/app/config/gcp-credentials.json
GOOGLE_CLOUD_PROJECT=your-project-id

# Translation service
TRANSLATION_PROVIDER=google  # google, nllb, hybrid
TRANSLATION_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ========================================
# VIDEO PROCESSING (Celery)
# ========================================
# Celery broker (use Redis)
CELERY_BROKER_URL=redis://redis-host.example.com:6379/1
CELERY_RESULT_BACKEND=redis://redis-host.example.com:6379/2

# Celery workers
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300

# Video processing
VIDEO_PROCESSING_QUEUE=video_processing
SKELETON_EXTRACTION_QUEUE=skeleton_extraction
TRANSLATION_QUEUE=translation

# ========================================
# CDN (CloudFlare / AWS CloudFront)
# ========================================
CDN_ENABLED=true
CDN_URL=https://cdn.yourdomain.com

# CloudFlare
CLOUDFLARE_ZONE_ID=your_zone_id
CLOUDFLARE_API_KEY=your_cloudflare_api_key

# Cache control
CDN_CACHE_TTL_VIDEOS=86400
CDN_CACHE_TTL_IMAGES=604800
CDN_CACHE_TTL_STATIC=2592000

# ========================================
# MONITORING & LOGGING
# ========================================
# Sentry (Error tracking)
SENTRY_DSN=https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX@o123456.ingest.sentry.io/1234567
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Log level
LOG_LEVEL=INFO
LOG_FORMAT=json

# DataDog (optional - Application Performance Monitoring)
# DATADOG_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# DATADOG_APP_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# DATADOG_SERVICE_NAME=martial-arts-backend

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_API=100/minute
RATE_LIMIT_UPLOAD=10/hour

# ========================================
# SECURITY HEADERS
# ========================================
ENABLE_HTTPS_REDIRECT=true
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
ENABLE_CSP=true
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"

# ========================================
# FEATURE FLAGS
# ========================================
ENABLE_REGISTRATION=true
ENABLE_OAUTH=true
ENABLE_VIDEO_UPLOAD=true
ENABLE_LIVE_STREAMING=true
ENABLE_AI_COACH=true
ENABLE_POSE_CORRECTION=true
ENABLE_BLOCKCHAIN=false
ENABLE_MAINTENANCE_MODE=false

# ========================================
# BUSINESS CONFIGURATION
# ========================================
# Stelline (virtual currency)
STELLINE_EUR_RATIO=100

# Subscription tiers (EUR cents)
SUBSCRIPTION_HYBRID_LIGHT_PRICE=499
SUBSCRIPTION_HYBRID_STANDARD_PRICE=999
SUBSCRIPTION_PREMIUM_PRICE=1999
SUBSCRIPTION_BUSINESS_PRICE=4999

# PPV (Pay-Per-View)
PPV_MIN_PRICE=1.00
PPV_MAX_PRICE=50.00

# Maestro revenue split (percentage)
MAESTRO_REVENUE_SHARE=40
ASD_REVENUE_SHARE=50
PLATFORM_REVENUE_SHARE=10

# Withdrawal minimum (EUR)
WITHDRAWAL_MINIMUM_EUR=100

# ========================================
# MOBILE APP (React Native / Expo)
# ========================================
EXPO_PUBLIC_API_URL=https://api.yourdomain.com
EXPO_PUBLIC_WS_URL=wss://api.yourdomain.com
EXPO_PROJECT_ID=your-expo-project-id

# Push notifications (Firebase)
FIREBASE_SERVER_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
FIREBASE_SENDER_ID=123456789012

# ========================================
# BACKUP & DISASTER RECOVERY
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=martial-arts-backups

# ========================================
# DEVELOPMENT TOOLS (disable in production)
# ========================================
ENABLE_SWAGGER_DOCS=false
ENABLE_ADMIN_PANEL=true
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILER=false

# ========================================
# THIRD-PARTY INTEGRATIONS
# ========================================
# Google Analytics
GA_TRACKING_ID=G-XXXXXXXXXX

# Facebook Pixel
FB_PIXEL_ID=XXXXXXXXXXXXXXXX

# Hotjar
HOTJAR_ID=XXXXXXX

# Intercom (customer support)
INTERCOM_APP_ID=XXXXXXXX

# ========================================
# SSL/TLS CERTIFICATES
# ========================================
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# Let's Encrypt email
LETSENCRYPT_EMAIL=admin@yourdomain.com

# ========================================
# DOCKER PRODUCTION SETTINGS
# ========================================
COMPOSE_PROJECT_NAME=martial_arts_prod
RESTART_POLICY=always

# Container resource limits
BACKEND_MEMORY_LIMIT=2g
BACKEND_CPU_LIMIT=2
FRONTEND_MEMORY_LIMIT=1g
FRONTEND_CPU_LIMIT=1

# ========================================
# NOTES FOR DEPLOYMENT
# ========================================
#
# Before deploying to production:
# 1. Generate SECRET_KEY: openssl rand -hex 32
# 2. Setup PostgreSQL managed database (DigitalOcean, AWS RDS, etc.)
# 3. Configure Stripe webhook endpoint in Stripe Dashboard
# 4. Create S3 bucket or CloudFlare R2 bucket
# 5. Setup SendGrid account and verify sender domain
# 6. Create Sentry project and get DSN
# 7. Configure DNS records for your domain
# 8. Setup SSL certificates (Let's Encrypt or CloudFlare)
# 9. Test all integrations in staging environment first
# 10. Run database migrations: alembic upgrade head
#
# Security Checklist:
# - SECRET_KEY is random and unique
# - Database password is strong (20+ chars)
# - All API keys are production keys (not test)
# - .env.production is in .gitignore
# - CORS_ORIGINS only includes your domains
# - DEBUG=false in production
# - HTTPS enabled and enforced
# - Rate limiting enabled
# - Sentry error tracking active
#
# ========================================
